
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Security &#8212; pyrfc 2.8.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/agogo.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Building from source" href="build.html" />
    <link rel="prev" title="Server scenario" href="server.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">pyrfc 2.8.3 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="server.html" title="Server scenario"
             accesskey="P">previous</a> |
          <a href="build.html" title="Building from source"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="security">
<span id="authentication"></span><h1>Security<a class="headerlink" href="#security" title="Permalink to this heading">¶</a></h1>
<p>Plain RFC connections are mainly used for prototyping, while in production
secure connections are required. For more information on RFC security see:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://service.sap.com/security">Security on SAP Service Marketplace</a></p></li>
<li><p><a class="reference external" href="http://wiki.scn.sap.com/wiki/display/Security/Best+Practice+-+How+to+analyze+and+secure+RFC+connections">RFC Security Best Practices on SAP SCN</a></p></li>
<li><p><a class="reference external" href="https://wiki.scn.sap.com/wiki/display/ABAPConn/ABAP+Connectivity+Home">Securing RFC Connections on ABAP Connectivity Wiki</a></p></li>
</ul>
<p>SAP NW RFC Library supports plain and secure connection with following authentication methods:</p>
<ul class="simple">
<li><p><a class="reference external" href="#plain-auth">Plain with user / password</a></p></li>
<li><p>SNC</p>
<ul>
<li><p><a class="reference external" href="#snc-with-user-pse">with User PSE</a></p></li>
<li><p><a class="reference external" href="#snc-with-x509">with X509</a></p></li>
</ul>
</li>
</ul>
<p>NW ABAP servers support in addition:</p>
<ul class="simple">
<li><p>SAP logon tickets</p></li>
<li><p>Security Assertion Markup Language (SAML)</p></li>
</ul>
<p>Assuming you are familiar with abovementioned concepts and have ABAP backend system
configured for SNC communication, here you may find connection strings examples,
for testing plain and secure RFC connections, with various authentication methods.</p>
<section id="id1">
<h2>Authentication<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<section id="plain-auth">
<span id="id2"></span><h3>Plain with user / password<a class="headerlink" href="#plain-auth" title="Permalink to this heading">¶</a></h3>
<p>The simplest and least secure form of the user authentication.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ABAP_SYSTEM</span> <span class="o">=</span> <span class="p">{</span>
     <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="s1">&#39;demo&#39;</span><span class="p">,</span>
     <span class="s1">&#39;passwd&#39;</span><span class="p">:</span> <span class="s1">&#39;welcome&#39;</span><span class="p">,</span>

     <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;I64&#39;</span><span class="p">,</span>
     <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="s1">&#39;800&#39;</span><span class="p">,</span>
     <span class="s1">&#39;ashost&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.1&#39;</span><span class="p">,</span>
     <span class="s1">&#39;sysnr&#39;</span><span class="p">:</span> <span class="s1">&#39;00&#39;</span><span class="p">,</span>
     <span class="s1">&#39;saprouter&#39;</span><span class="p">:</span> <span class="n">SAPROUTER</span><span class="p">,</span>
     <span class="s1">&#39;trace&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span>
<span class="p">}</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">get_connection</span><span class="p">(</span><span class="n">ABAP_SYSTEM</span><span class="p">)</span> <span class="c1"># plain</span>
</pre></div>
</div>
</section>
<section id="snc-with-user-pse">
<span id="id3"></span><h3>SNC with User PSE<a class="headerlink" href="#snc-with-user-pse" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="http://help.sap.com/saphelp_nw73/helpdata/en/4c/61a6c6364012f3e10000000a15822b/content.htm?frameset=/en/4c/6269c8c72271d0e10000000a15822b/frameset.htm">User PSE</a>
is used for opening the SNC connection and the same user is used for the authentication
(logon) in NW ABAP backend. Generally not recomended, see <a class="reference external" href="https://launchpad.support.sap.com/#/notes/1028503">SAP Note 1028503 - SNC-secured RFC connection: Logon ticket is ignored</a></p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>SNC name must be configured for the ABAP user in NW ABAP system, using transaction SU01</p></li>
</ul>
<img alt="_images/SU01-SNC.png" class="align-center" src="_images/SU01-SNC.png" />
<ul class="simple">
<li><p>SAP Single Sign On must be configured on a client and the user must be logged in on a client.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ABAP_SYSTEM</span> <span class="o">=</span> <span class="p">{</span>
     <span class="s1">&#39;snc_partnername&#39;</span><span class="p">:</span> <span class="s1">&#39;p:CN=I64, O=SAP-AG, C=DE&#39;</span><span class="p">,</span>
     <span class="s1">&#39;snc_lib&#39;</span><span class="p">:</span> <span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Program Files (x86)</span><span class="se">\\</span><span class="s1">SECUDE</span><span class="se">\\</span><span class="s1">OfficeSecurity</span><span class="se">\\</span><span class="s1">secude.dll&#39;</span><span class="p">,</span>

     <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;I64&#39;</span><span class="p">,</span>
     <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="s1">&#39;800&#39;</span><span class="p">,</span>
     <span class="s1">&#39;ashost&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.1&#39;</span><span class="p">,</span>
     <span class="s1">&#39;sysnr&#39;</span><span class="p">:</span> <span class="s1">&#39;00&#39;</span><span class="p">,</span>
     <span class="s1">&#39;saprouter&#39;</span><span class="p">:</span> <span class="n">SAPROUTER</span><span class="p">,</span>
     <span class="s1">&#39;trace&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span>
<span class="p">}</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">get_connection</span><span class="p">(</span><span class="n">ABAP_SYSTEM</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example the SNC_LIB key contains the path to security library
(SAP cryptographic library or 3rd party product). Alternatively, the
SNC_LIB can be set as the environment variable, in which case it does
not have to be provided as a parameter for opening SNC connection.</p>
</section>
<section id="snc-with-x509">
<span id="snc-with-x50"></span><h3>SNC with X509<a class="headerlink" href="#snc-with-x509" title="Permalink to this heading">¶</a></h3>
<p>The client system PSE is used for opening SNC connection and forwarding user
X509 certificate to NW ABAP backend system, for authentication and logon.</p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>The user does not have to be logged into the client system, neither the Single
Sign On must be configured on a client</p></li>
<li><p>The trusted relationship must be established between the NW ABAP backend and
the client system.</p></li>
<li><p>The client system must be registered in the NW ABAP backend Access Control
List (ACL), using transaction SNC0</p></li>
<li><p>Keystores are generated on a client system, using SAP cryptography tool <em>SAPGENPSE</em> and
the environment variable SECUDIR points to the folder with generated keystores</p></li>
</ul>
<img alt="_images/SNC0-1.png" class="align-center" src="_images/SNC0-1.png" />
<img alt="_images/SNC0-2.png" class="align-center" src="_images/SNC0-2.png" />
<ul class="simple">
<li><p>User X509 certificate must be mapped to ABAP NW backend user, using transaction EXTID_DN</p></li>
</ul>
<img alt="_images/EXTID_DN-1.png" class="align-center" src="_images/EXTID_DN-1.png" />
<img alt="_images/EXTID_DN-2.png" class="align-center" src="_images/EXTID_DN-2.png" />
<p>The same connection parameters as in a previous example, with X509 certificate added.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ABAP_SYSTEM</span> <span class="o">=</span> <span class="p">{</span>
     <span class="s1">&#39;snc_partnername&#39;</span><span class="p">:</span> <span class="s1">&#39;p:CN=I64, O=SAP-AG, C=DE&#39;</span><span class="p">,</span>
     <span class="s1">&#39;snc_lib&#39;</span><span class="p">:</span> <span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Program Files (x86)</span><span class="se">\\</span><span class="s1">SECUDE</span><span class="se">\\</span><span class="s1">OfficeSecurity</span><span class="se">\\</span><span class="s1">secude.dll&#39;</span><span class="p">,</span>

     <span class="s1">&#39;x509cert&#39;</span><span class="p">:</span> <span class="s1">&#39;MIIDJjCCAtCgAwIBAgIBNzA ... NgalgcTJf3iUjZ1e5Iv5PLKO&#39;</span><span class="p">,</span>

     <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;I64&#39;</span><span class="p">,</span>
     <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="s1">&#39;800&#39;</span><span class="p">,</span>
     <span class="s1">&#39;ashost&#39;</span><span class="p">:</span> <span class="s1">&#39;10.0.0.1&#39;</span><span class="p">,</span>
     <span class="s1">&#39;sysnr&#39;</span><span class="p">:</span> <span class="s1">&#39;00&#39;</span><span class="p">,</span>
     <span class="s1">&#39;saprouter&#39;</span><span class="p">:</span> <span class="n">SAPROUTER</span><span class="p">,</span>
     <span class="s1">&#39;trace&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span>
<span class="p">}</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">get_connection</span><span class="p">(</span><span class="n">ABAP_SYSTEM</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://help.sap.com/saphelp_nw04s/helpdata/en/b1/07dd3aeedb7445e10000000a114084/frameset.htm">SAP Help</a> for more information.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client scenario</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server scenario</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="remarks.html">Remarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pyrfc.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyrfc</span></code></a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="server.html" title="Server scenario"
              >previous</a> |
            <a href="build.html" title="Building from source"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/authentication.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, SAP.
      Last updated on 2023-04-25 15:30.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>